version: '3.8'

services:
  claude-code-console:
    build:
      context: .
      dockerfile: Dockerfile

    container_name: claude-code-console
    hostname: claude-dev
    stdin_open: true
    tty: true

    # Рабочая директория внутри контейнера
    working_dir: /home/claude/workspace

    volumes:
      # Локальная директория n8n-install как рабочий проект Claude
      - /home/user/n8n-install:/home/claude/workspace

      # Конфиги Claude CLI лежат в n8n-install/.claudecli
      - /home/user/n8n-install/.claudecli:/home/claude/.config/claude

    environment:
      - TERM=xterm-256color

    restart: unless-stopped
    command: /bin/bash
